<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
		<link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
		<link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/custom.css"> 
		<link rel="stylesheet" type="text/css" href="css/fresco.css">
		
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<title>Zachary Smith</title>
		
		<style type="text/css">
            div.row {
                margin-bottom: 15px;
            }

            body {
                padding-bottom: 50px;
            }

            div.top-header {
                margin-bottom:100px;
            }

            h3.page-header {
                margin-top: 50px;
            }

            figure {
                position: relative;
            }

			code {
				white-space: pre-wrap;       /* css-3 */
				white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
				white-space: -pre-wrap;      /* Opera 4-6 */
				white-space: -o-pre-wrap;    /* Opera 7 */
				word-wrap: break-word;       /* Internet Explorer 5.5+ */
			}
        </style> 
		
	</head>

	<body>
		<nav class="navbar navbar-default">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" class="active" href="http://www.zacharysmith.science">Zachary Smith</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Solar Cars<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="http://www.zacharysmith.science/celeritas">Celeritas</a></li>
								<li><a href="http://www.zacharysmith.science/navitas">Navitas</a></li>
							</ul>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Embedded Systems Projects<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="http://www.zacharysmith.science/celeritas-bms">Battery Monitoring System - Celeritas</a></li>
								<li><a href="http://www.zacharysmith.science/navitas-lcu">Light Control Unit - Navitas</a></li>
							</ul>
						<li><a href="http://www.zacharysmith.science/works-of-navitas">Art</a></li>
						<li><a href="http://www.zacharysmith.science/resume">Résumé<span class="sr-only">(current)</span></a></li>
							
						</li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>
	
	
	
	
		<div id="container" align="center">
			<div class="inner">
				<a 	href="images/celeritas-bms-focus.jpg"
					class="fresco"
					data-fresco-caption=""
					data-fresco-group="header">
					<img src="images/celeritas-bms-focus-wide.png" class="img-responsive" class="col-sm-12" />
				</a>
				
				<header>
					<h1 align="center">Celeritas BMS</h1>
					<h3 align="center">Battery Monitoring System</h3>		
				</header>
			</div>
			
			<div class="inner">	
				<div align="justify">
					<p>
						For the team's 2011 car, Celeritas, I was assigned to the Battery Protection System (BPS) team.  The BPS was designed to monitor the temperature, voltage, and current of the battery packs, and ensure 
					that the packs remain in safe operating conditions.  If the packs drifted out of bounds, the system would send a notice via the auxiliary power to the driver and shut down.  There were two main components
					to the BPS the Logic Host and the Lithium Ion Monitoring Modules (LIMMs).  The Logic Host acted as the main control board, and interfaced with the LIMMs via SPI and the rest of the car via CAN.  The LIMMs
					were placed inside each battery pack and took measurements on the batteries, and balanced the cells.  The Logic Host could control up to 8 LIMMs. The team consisted of two people, and we both split up to work on different sections of the project. 
					I worked on the Logic Host and the Power Systems boards, while my friend worked on the Lithium Ion Monitoring Modules. 
					</p>
					<p>
						We decided to implement a modular battery pack system with Celeritas. Past solar cars used only one "race pack". The race pack is usually designed to balance energy storage and battery weight, in the case of 
					the Shell Eco-Marathon, this leads to very small battery packs that store enough energy for about 30 minutes of use. With Celeritas, we decided we'd design the race pack to be modular and expandable, to lengthen 
					drive time for non-race activities, where weight didn't matter. The BPS was designed to support up to 8 Battery Packs, this way we could save weight during the race, and still have the energy storage for an 
					afternoon long outreach event on a cloudy winter day. 
					</p>
					<p>
						The Logic Host of the BPS is built around a PIC 24 microcontroller. The microcontroller talks with the battery pack via SPI and with the other electronics on board the car via CAN. The LIMMs in each battery
					pack take voltage, current, and temperature readings, and report it to the Logic Host. The microcontroller sends this information over CAN to the Telemetry System and the Driver Display.  The Telemetry System transmits
					the data to be logged by an offboard laptop for debugging and race diagnostic purposes. This lets us tell the driver things like "You need to drive a bit slower in the sun on the next lap" during the race. The Driver Display
					shows the driver the relevant information from the BMS. Things like battery voltage are relatively useless for the driver and serve as a distraction, where as things like "Hey your car is about to shut down because you drained your
					batteries dummy" are slightly more useful. 
					</p>
				</div>
			</div> 
			
			<div class="gallery">
				<div class="row">
					<div class="col-sm-12">
						<div class="col-sm-3">
							<a href="images/bps-host1_orig.jpg"
							   class="fresco"
							   data-fresco-caption="The first page of the BPS Host schematic contains the microcontroller and it's decoupling capacitors
							   and oscillator. This was created during my first year of solar racing,
							   which is why all the ports are facing the same direction. I didn't realize at the time that the direction of the port arrow was a 
							   convention for indicating whether the signal was an input, output, or bi-directional, so I just picked the direction I thought 
							   'looked nicer'."
							   data-fresco-group="unique_name">
							   <img src="images/bps-host1-800px.png" class="img-responsive" />
							</a>
						</div>	
						
						<div class="col-sm-3">
							<a href="images/bps-host2_orig.jpg"
							   class="fresco"
							   data-fresco-caption="The second page of the BPS Host schematic contains the peripherals for the board. This includes the switching power supply, 
							   charge indicator LEDs, and the communication chips and connectors (CAN and serial). Bi-color LEDs were used to indicate battery pack status, red for drained,
							   yellow for charging, and green for charged. Orange_sense and Orange_led were a hack to be able to sense 
							   what stage of charging the external charger was in. We used an off the shelf LiFePO4 battery charger, and ran wires from the charge indicator LEDs
							   to the microcontroller, to figure out the charge status."
							   data-fresco-group="unique_name">
							   <img src="images/bps-host2-800px.png" class="img-responsive" />
							   
							</a>
						</div>	
							
						<div class="col-sm-3">
							<a href="images/bps-host3_orig.jpg"
							   class="fresco"
							   data-fresco-caption="The third page of the BPS Host schematic contains the controls and connectors for the battery packs. Our design supported up to 8 
							   modular battery packs, connected in parallel to increase drive time during cloudy conditions (I.E all of Indiana). Future designs used an updated chip 
							   which allowed daisy chaining the batteries in order to &quot;go fast&quot;(the technical term)."
							   data-fresco-group="unique_name">
							   <img src="images/bps-host3-800px.png" class="img-responsive" />
							</a>
						</div>	
						
						<div class="col-sm-3">
							<a href="images/top-bps-host_orig.png"
							   class="fresco"
							   data-fresco-caption="This is the top side of the BPS Host PCB, designed using OrCAD Layout. This was the first PCB I designed. The hardest 
							   part of designing this board, was trying to understand just how much room I needed to run traces, and how much space the components needed.
							    As a result, I erred on the side of caution, and ended up with a lot of space on the board. There are also a few lazy traces that a more 
								experienced me would have fixed. One thing that I managed to do that many novice board designers miss, was properly naming the connectors.
								 Anyone who works on the board in the future will thank you."
							   data-fresco-group="unique_name">
							   <img src="images/top-bps-host-800px.png" class="img-responsive" />
							</a>
						</div>	
					</div>
				</div>
				
				<div class="row">
					<div class="col-sm-12">													
						<div class="col-sm-3">
							<a href="images/bottom-bps-host_orig.png"
							   class="fresco"
							   data-fresco-caption="The bottom side of the BPS Host PCB, not quite as interesting as the top. Being my first board, I didn't manage to take
							   advantage of both sides to reduce the board size. The parts that I did put on the back, were all parts that needed to be as physically close
							   the microcontroller as possible, decoupling capacitors and the oscillator. This allowed them to be as close to the micro as possible, without blocking
							   traces on the top layer."
							   data-fresco-group="unique_name">
							   <img src="images/bottom-bps-host-800px.png" class="img-responsive" />
							</a>
						</div>	
							
						<div class="col-sm-3">
							<a href="images/bps-power1_orig.jpg"
							   class="fresco"
							   data-fresco-caption="The BPS Power board supplies auxiliary power to the car via a VICOR dc to dc converter. The board was designed to be stacked 
							   double decker style with the BPS Host, based off of a previous cars BPS design. If you look closely you can also see a mistake that made it past 
							   design reviews, the fuse F3 doesn't actually fuse anything. Luckily we discovered it before we needed it, during a &quot;why do things have power when they
							   should be off&quot; debug session, and the fix was simple. This circuit became known as &quot;the decoy circuit&quot;. "
							   data-fresco-group="unique_name">
							   <img src="images/bps-power1-800px.png" class="img-responsive" />
							</a>
						</div>	
			
						<div class="col-sm-3">
							<a href="images/top-bps-power_orig.png"
							   class="fresco"
							   data-fresco-caption="This is the top layer of the BPS Power PCB, made in OrCAD Layout. This is also the first board I had designed intended to carry
							   any sort of power. It shows in how messy all the high current traces are routed, everything is oversized, and the board did work, but I would definitely do 
							   the board differet today. Most of the high power traces should have been run parallel on the top and bottom layer, with multiple vias in trace, instead of being big 
							   fat winding traces. In a lot of cases, copper pours would have probably worked better than trying to fight the trace tool. Also there are quite a few thermal reliefs that
							   should have been turned off. A lot of simple errors that are easy to make when your design team consists entirely of sophomores. Everything is a learning experience."
							   data-fresco-group="unique_name">
							   <img src="images/top-bps-power-800px.png" class="img-responsive" />
							</a>
						</div>	
							
						<div class="col-sm-3">
							<a href="images/bottom-bps-power_orig.png"
							   class="fresco"
							   data-fresco-caption="The bottom layer of the BPS Power PCB is much of the same, so I'll leave an interesting story. "
							   data-fresco-group="unique_name">
							   <img src="images/bottom-bps-power-800px.png" class="img-responsive" />
							</a>
						</div>	
					</div>
				</div>
			</div>
		</div>		

		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script type="text/javascript" src="js/fresco.js"></script>
		<script src="js/bootstrap.min.js"></script>
	</body>
</html>